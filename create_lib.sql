
CREATE TABLE PUBLISHER
(NAME VARCHAR(20) PRIMARY KEY NOT NULL,
ADDRESS VARCHAR(20),
PHONE INTEGER);

DESC PUBLISHER;


CREATE TABLE BOOK(BOOK_ID INTEGER PRIMARY KEY,
TITLE VARCHAR(20) NOT NULL,
PUB_NAME VARCHAR(20) NOT NULL,
PUB_YEAR VARCHAR(20) NOT NULL,
FOREIGN KEY (PUB_NAME) REFERENCES PUBLISHER(NAME) ON DELETE CASCADE);


DESC BOOK;


CREATE TABLE BOOK_AUTHORS
(BOOK_ID INTEGER NOT NULL,
AUTHOR_NAME VARCHAR(20) NOT NULL,
FOREIGN KEY (BOOK_ID) REFERENCES BOOK(BOOK_ID) ON DELETE CASCADE,
PRIMARY KEY(BOOK_ID));

DESC BOOK_AUTHORS;



CREATE TABLE LIBRARY_PROGRAMME
(PROGRAMME_ID INTEGER PRIMARY KEY NOT NULL,
PROGRAMME_NAME VARCHAR(50) NOT NULL,
ADDRESS VARCHAR(50));

DESC LIBRARY_PROGRAMME;

CREATE TABLE BOOK_COPIES
(
BOOK_ID INTEGER,
PROGRAMME_ID INTEGER NOT NULL,
NO_OF_COPIES INTEGER NOT NULL,

FOREIGN KEY (BOOK_ID) REFERENCES BOOK(BOOK_ID) ON DELETE CASCADE,
FOREIGN KEY(PROGRAMME_ID) REFERENCES LIBRARY_PROGRAMME(PROGRAMME_ID) ON DELETE CASCADE,
PRIMARY KEY (BOOK_ID,PROGRAMME_ID));

DESC BOOK_COPIES;


CREATE TABLE BOOK_LENDING
(BOOK_ID INTEGER NOT NULL,
PROGRAMME_ID INTEGER NOT NULL,
CARD_NO INTEGER NOT NULL,
DATE_OUT DATE NOT NULL,
DUE_DATE DATE NOT NULL,
FOREIGN KEY (BOOK_ID) REFERENCES BOOK(BOOK_ID) ON DELETE CASCADE,
FOREIGN KEY (PROGRAMME_ID) REFERENCES LIBRARY_PROGRAMME(PROGRAMME_ID) ON DELETE CASCADE,
PRIMARY KEY (BOOK_ID,PROGRAMME_ID,CARD_NO));

DESC BOOK_LENDING;




INSERT INTO PUBLISHER VALUES ("mcgraw", "noida", 919191919), ("phi","pune",818181818), ("pearson","nagpur",717171717);


INSERT INTO BOOK VALUES
(111, "management", "mcgraw", "2016"),
(112,"computer networks","pearson","2006"),
(113,"database concepts","pearson","2014"),
(114,"entrepreneurship","pearson","2010"),
(115,"formal language","mcgraw","2006"),
(116,"embeded system","mcgraw","2014"),
(117,"programming in java","phi","2010");

INSERT INTO BOOK_AUTHORS VALUES
(111,"tripaty reddy"),
(112,"larry peterson"),
(113,"ramez navathe"),
(114,"john hoperatt"),
(115,"vasant desai"),
(116,"raj kamal"),
(117,"herbert schildt");

INSERT INTO LIBRARY_PROGRAMME VALUES
(11,"vc campus", "puttur"),
(12, "vcs", "mangalore"),
(13, "mg road", "bangalore");

INSERT INTO BOOK_COPIES VALUES
(111,11,5),
(111,13,10),
(112,12,5),
(113,11,12),
(113,12,20),
(114,13,15),
(115,11,9),
(115,13,25),
(116,13,5),
(117,12,5);

INSERT INTO BOOK_LENDING VALUES
(111,11,1111,"2017-06-10","2017-07-20"),
(111,12,1112,"2017-07-13","2017-07-23"),
(114,13,1113,"2017-06-05","2017-07-15"),
(115,13,1113,"2017-06-10","2017-06-20"),
(116,13,1113,"2017-06-15","2017-07-25"),
(111,13,1113,"2017-03-23","2017-04-02"),
(111,13,1114,"2017-03-20","2017-03-30"),
(113,11,1111,"2017-04-02","2017-04-12"),
(113,12,1111,"2017-05-05","2017-05-05"),
(115,11,1111,"2017-02-02","2017-02-12");
